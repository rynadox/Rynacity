<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>RYNACITY RP - Jeu Cartes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.tailwindcss.com?ver=3"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap');
    body { font-family: 'Inter', sans-serif; }
    
    .gradient-bg { background: linear-gradient(120deg, rgba(255,255,255,0.03), rgba(255,255,255,0.08)); }
    .grid-pattern {
      background-image:
        linear-gradient(to right, rgba(255,255,255,.05) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(255,255,255,.05) 1px, transparent 1px);
      background-size: 40px 40px; opacity:.04;
    }
    
    .card-hover { position: relative; overflow: hidden; transition: transform .25s ease, box-shadow .25s ease, border-color .25s ease; }
    .card-hover::before {
      content: ''; position: absolute; inset: 0; pointer-events: none;
      background: radial-gradient(600px circle at var(--x,50%) var(--y,50%), rgba(255,255,255,0.05), transparent 40%);
      opacity: 0; transition: opacity .25s ease;
    }
    .card-hover:hover { transform: translateY(-4px); border-color: rgba(255,255,255,.3); box-shadow: 0 10px 30px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.1); }
    .card-hover:hover::before { opacity: 1; }
    
    .spa-view { display: none; }
    .spa-view.active { display: block; }
    
    /* --- NAVIGATION (CENTRÉE PARFAITEMENT) --- */
    .nav-btn {
      color: #d1d5db; 
      background: rgba(255, 255, 255, 0.1); 
      border: 1px solid rgba(255, 255, 255, 0.05);
      border-radius: 9999px; 
      padding: .6rem 1.2rem;
      transition: all .2s ease; position: relative; outline: none;
    }
    .nav-btn:hover, .nav-btn:focus-visible { 
      color:#fff; 
      background: rgba(255, 255, 255, 0.2); 
      transform: translateY(-1px);
    }
    .nav-btn.active {
      color:#000; background: #ffffff;
      box-shadow: 0 0 20px rgba(255,255,255,0.3);
      font-weight: 700;
      border: none;
    }

    .input {
      width: 100%; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.12);
      border-radius: 9999px; padding: .75rem 1.5rem; color:#fff; outline: none; transition: border-color .2s ease, background .2s ease;
    }
    .input::placeholder { color: rgba(255,255,255,0.45); }
    .input:focus { border-color: rgba(255,255,255,0.35); background: rgba(255,255,255,0.07); }
    
    /* Boutons Blancs */
    .btn-gradient {
      display:inline-flex; align-items:center; gap:.5rem; padding:.8rem 1.5rem; border-radius: 9999px; 
      color:#111; font-weight:800; background: #ffffff; transition: transform .2s ease, opacity .2s ease;
      box-shadow: 0 4px 15px rgba(255,255,255,0.1);
    }
    .btn-gradient:hover { transform: translateY(-2px); opacity: 0.9; box-shadow: 0 4px 20px rgba(255,255,255,0.2); }
    
    /* --- LOADER PRO (HAUTE Z-INDEX) --- */
    .page-loader {
      position: fixed; inset: 0; background: #000; z-index: 9999;
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      transition: opacity 0.5s ease;
    }
    .page-loader.hidden { opacity: 0; pointer-events: none; }
    .spinner {
      width: 50px; height: 50px;
      border: 4px solid rgba(255,255,255,0.1);
      border-left-color: #ffffff;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    @keyframes spin { 100% { transform: rotate(360deg); } }

    /* --- NOTIFICATIONS --- */
    .notification-container {
      position: fixed; top: 20px; right: 20px; z-index: 10000;
      display: flex; flex-direction: column; gap: 10px; pointer-events: none;
    }
    .toast {
      background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.2);
      color: white;
      padding: 1rem 1.5rem;
      border-radius: 1rem;
      box-shadow: 0 10px 30px rgba(0,0,0,0.5);
      display: flex; align-items: center; gap: 10px;
      animation: slideIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
      min-width: 300px;
    }
    .toast.error { border-left: 4px solid #ef4444; }
    .toast.success { border-left: 4px solid #22c55e; }
    .toast.info { border-left: 4px solid #3b82f6; }
    @keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
    @keyframes fadeOut { to { transform: translateX(100%); opacity: 0; } }

    /* Amélioration Mot de passe */
    .password-modal { 
      position: fixed; inset: 0; background: rgba(0,0,0,0.92); backdrop-filter: blur(12px); 
      display: flex; align-items: center; justify-content: center; z-index: 9000; 
    }
    .password-modal.hidden { display: none; }
    .shake { animation: shake .5s; }
    @keyframes shake { 0%,100%{transform:translateX(0)} 25%{transform:translateX(-10px)} 75%{transform:translateX(10px)} }
    
    /* --- BOUTIQUE (COULEURS ET ICONES) --- */
    .shop-sport { color: #EAB308; border-color: rgba(234, 179, 8, 0.3); background: rgba(234, 179, 8, 0.05); }
    .shop-sport:hover { border-color: rgba(234, 179, 8, 0.6); background: rgba(234, 179, 8, 0.1); }
    .shop-4x4 { color: #10B981; border-color: rgba(16, 185, 129, 0.3); background: rgba(16, 185, 129, 0.05); }
    .shop-4x4:hover { border-color: rgba(16, 185, 129, 0.6); background: rgba(16, 185, 129, 0.1); }
    .shop-vip { color: #A855F7; border-color: rgba(168, 85, 247, 0.4); background: rgba(168, 85, 247, 0.1); }
    .shop-vip:hover { border-color: rgba(168, 85, 247, 0.8); background: rgba(168, 85, 247, 0.15); }

    /* --- STYLES JEU DE CARTES --- */
    .perspective-1000 { perspective: 1000px; }
    .transform-style-3d { transform-style: preserve-3d; }
    .backface-hidden { backface-visibility: hidden; -webkit-backface-visibility: hidden; }
    .rotate-y-180 { transform: rotateY(180deg); }
    
    .card-inner {
      position: relative; width: 100%; height: 100%; text-align: center;
      transition: transform 0.6s cubic-bezier(0.4, 0.0, 0.2, 1);
      transform-style: preserve-3d; background-color: #000000; 
    }
    
    .card-face {
      position: absolute; width: 100%; height: 100%;
      -webkit-backface-visibility: hidden; backface-visibility: hidden;
      border-radius: 1rem; background-color: #000000; 
      border: 1px solid rgba(255,255,255,0.15); 
      display: flex; align-items: center; justify-content: center;
    }

    /* Bouton Edit Pseudo */
    .edit-pseudo-btn {
      font-size: 0.75rem; color: rgba(255,255,255,0.4); text-decoration: underline; cursor: pointer; margin-top: 4px; display: inline-block;
    }
    .edit-pseudo-btn:hover { color: white; }
    
    .countdown {
      font-size: 0.7rem; color: #9CA3AF; display: block; margin-top: 2px; font-variant-numeric: tabular-nums;
    }

  </style>
</head>
<body class="bg-black text-white antialiased">

  <!-- CONTAINER NOTIFICATIONS -->
  <div id="notificationContainer" class="notification-container"></div>

  <!-- LOADER (Z-INDEX HAUT) -->
  <div id="pageLoader" class="page-loader hidden">
    <div class="spinner"></div>
    <p class="mt-4 text-white font-bold tracking-widest">CHARGEMENT...</p>
  </div>

  <!-- Accès par mot de passe site -->
  <div id="passwordModal" class="password-modal" aria-modal="true" role="dialog">
    <div class="max-w-md w-full mx-4">
      <div class="backdrop-blur-xl bg-white/10 border border-white/20 rounded-[2rem] p-8 shadow-2xl card-hover">
        <div class="text-center mb-8">
          <!-- Logo Blanc -->
          <div class="inline-flex items-center justify-center w-16 h-16 bg-white rounded-[1.5rem] mb-4 shadow-lg shadow-white/10">
            <span class="text-black font-black text-2xl">RY</span>
          </div>
          <h2 class="text-3xl font-bold text-white mb-2">RYNACITY RP</h2>
          <p class="text-white/60">Zone sécurisée. Entrez le code.</p>
        </div>
        <form id="passwordForm" class="space-y-4">
          <input type="password" id="passwordInput" placeholder="Mot de passe" class="input" autocomplete="off" aria-label="Mot de passe" />
          
          <!-- Vérification Bot -->
          <div class="bg-white/5 border border-white/10 rounded-xl p-3 flex items-center justify-between">
            <span class="text-sm text-white/70">Sécurité: <span id="captchaQuestion" class="font-bold text-white">2 + 2 = ?</span></span>
            <input type="number" id="captchaInput" class="w-20 bg-transparent border-b border-white/30 text-center text-white focus:outline-none" placeholder="?">
          </div>

          <button type="submit" class="btn-gradient w-full justify-center">Accéder au site</button>
          <p id="errorMessage" class="text-red-400 text-sm text-center hidden" role="alert">Mot de passe incorrect !</p>
        </form>
      </div>
    </div>
  </div>

  <!-- Contenu principal -->
  <div id="mainContent" class="hidden">
    <!-- Navbar (Centrée, Pas de Bouton Retour, Icones claires) -->
    <header class="sticky top-0 backdrop-blur-lg bg-black/90 z-50 mt-4 rounded-b-2xl h-20"> 
      <div class="max-w-screen-xl w-full mx-auto px-6 relative h-full">
        
        <!-- Navigation Centrée (Visible même dans le jeu) -->
        <nav id="mainNav" class="flex items-center justify-center h-full gap-2 md:gap-4" aria-label="Navigation principale">
          <button data-view="homeView" class="nav-btn flex items-center gap-2" aria-current="page">
            <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg>
            <!-- RETOUR À ACCUEIL PAR DÉFAUT -->
            <span class="hidden md:block font-bold">Accueil</span>
          </button>
          <button data-view="docView" class="nav-btn flex items-center gap-2">
            <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>
            <span class="hidden md:block">Documentation</span>
          </button>
          <button data-view="mapView" class="nav-btn flex items-center gap-2">
            <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"/></svg>
            <span class="hidden md:block">Carte</span>
          </button>
          <button data-view="updatesView" class="nav-btn flex items-center gap-2">
            <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/></svg>
            <span class="hidden md:block">Mises à jour</span>
          </button>
          <button data-view="discordView" class="nav-btn flex items-center gap-2">
            <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24"><path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37 67.703 67.703 0 0 0-1.718 6.645 68.657 68.657 0 0 0 2.588 4.486.076.076 0 0 0 .084.028 19.8 19.8 0 0 0 5.994-2.99.077.077 0 0 0 .083-.028 68.587 68.587 0 0 0 2.594-4.486 67.7 67.7 0 0 0-1.718-6.645zm-10.815 13.588a2.295 2.295 0 1 1 0-4.59 2.295 2.295 0 0 1 0 4.59zm6.815 0a2.295 2.295 0 1 1 0-4.59 2.295 2.295 0 0 1 0 4.59z"/></svg>
            <span class="hidden md:block">Discord</span>
          </button>
          <button data-view="shopView" class="nav-btn flex items-center gap-2">
            <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"/></svg>
            <span class="hidden md:block">Boutique</span>
          </button>
        </nav>
      </div>
    </header>

    <!-- Bottom mobile nav -->
    <div id="mobileNav" class="fixed md:hidden z-50 left-1/2 -translate-x-1/2 bottom-6">
      <div class="flex items-center backdrop-blur-lg bg-black/90 shadow-lg border border-white/10 px-3 py-3 rounded-full gap-2">
        <button data-view="homeView" class="nav-btn h-12 w-12 grid place-items-center"><svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg></button>
        <button data-view="docView" class="nav-btn h-12 w-12 grid place-items-center"><svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg></button>
        <button data-view="mapView" class="nav-btn h-12 w-12 grid place-items-center"><svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"/></svg></button>
        <button data-view="updatesView" class="nav-btn h-12 w-12 grid place-items-center"><svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/></svg></button>
        <button data-view="discordView" class="nav-btn h-12 w-12 grid place-items-center"><svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37 67.703 67.703 0 0 0-1.718 6.645 68.657 68.657 0 0 0 2.588 4.486.076.076 0 0 0 .084.028 19.8 19.8 0 0 0 5.994-2.99.077.077 0 0 0 .083-.028 68.587 68.587 0 0 0 2.594-4.486 67.7 67.7 0 0 0-1.718-6.645zm-10.815 13.588a2.295 2.295 0 1 1 0-4.59 2.295 2.295 0 0 1 0 4.59zm6.815 0a2.295 2.295 0 1 1 0-4.59 2.295 2.295 0 0 1 0 4.59z"/></svg></button>
        <button data-view="shopView" class="nav-btn h-12 w-12 grid place-items-center"><svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"/></svg></button>
      </div>
    </div>

    <!-- Vues -->
    <main class="relative overflow-hidden pb-20">
      <!-- HOME -->
      <section id="homeView" class="spa-view active">
        <div class="relative min-h-[92vh]">
          <div class="absolute inset-0 grid-pattern"></div>
          <div class="absolute bg-white blur-3xl h-96 w-96 rounded-full left-[6%] top-[5%] opacity-5"></div>
          <div class="absolute bg-white blur-3xl h-72 w-72 rounded-full right-[4%] bottom-[8%] opacity-5"></div>

          <div class="relative z-10 px-6 py-20">
            <div class="max-w-screen-xl mx-auto">
              <div class="text-center mb-16">
                <div class="inline-flex items-center backdrop-blur-sm bg-white/10 border border-white/10 mb-6 px-4 py-2 rounded-full">
                  <span class="text-white/80 text-sm font-medium ml-2">Jeu Roblox Roleplay</span>
                </div>
                <h2 class="text-6xl md:text-8xl font-black tracking-tight leading-tight mb-6 text-white">
                  RYNACITY RP
                </h2>
                <p class="max-w-2xl mx-auto text-white/70 text-xl md:text-2xl leading-relaxed">
                  Votre portail centralisé pour les <span class="text-white">mises à jour</span>, la <span class="text-white">documentation</span> et les <span class="text-white">jeux concours</span>.
                </p>
              </div>

              <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-16">
                <article class="card-hover backdrop-blur-[10px] bg-white/5 shadow-[rgba(0,0,0,0.35)_0px_10px_30px,rgba(255,255,255,0.12)_0px_1px_0px_0px_inset] h-80 border border-white/10 p-8 rounded-[2rem] cursor-pointer"
                         onclick="openView('docView')" onmousemove="cardLight(event,this)">
                  <div class="flex flex-col h-full">
                    <div class="flex items-start justify-between mb-6">
                      <div class="backdrop-blur-sm bg-white/10 p-3 rounded-3xl">
                        <svg class="text-white h-7 w-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>
                      </div>
                    </div>
                    <h3 class="text-2xl font-bold mb-3">Documentation</h3>
                    <p class="text-white/70 leading-relaxed">Guides complets, règles RP, FAQ, astuces pour progresser.</p>
                    <div class="mt-auto pt-6 flex items-center justify-between border-t border-white/10">
                      <span class="text-white text-sm font-medium">15+ guides</span>
                      <span class="text-white/70 text-sm">Découvrir →</span>
                    </div>
                  </div>
                </article>

                <article class="card-hover backdrop-blur-[10px] bg-white/5 shadow-[rgba(0,0,0,0.35)_0px_10px_30px,rgba(255,255,255,0.12)_0px_1px_0px_0px_inset] h-80 border border-white/10 p-8 rounded-[2rem] cursor-pointer"
                         onclick="openView('mapView')" onmousemove="cardLight(event,this)">
                  <div class="flex flex-col h-full">
                    <div class="flex items-start justify-between mb-6">
                      <div class="backdrop-blur-sm bg-white/10 p-3 rounded-3xl">
                        <svg class="text-white h-7 w-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"/></svg>
                      </div>
                    </div>
                    <h3 class="text-2xl font-bold mb-3">Carte Interactive</h3>
                    <p class="text-white/70 leading-relaxed">Aperçu, points d’intérêt, jobs, quartiers.</p>
                    <div class="mt-auto pt-6 flex items-center justify-between border-t border-white/10">
                      <span class="text-white text-sm font-medium">LIVE</span>
                      <span class="text-white/70 text-sm">Voir →</span>
                    </div>
                  </div>
                </article>

                <article class="card-hover backdrop-blur-[10px] bg-white/5 shadow-[rgba(0,0,0,0.35)_0px_10px_30px,rgba(255,255,255,0.12)_0px_1px_0px_0px_inset] h-80 border border-white/10 p-8 rounded-[2rem] cursor-pointer"
                         onclick="openView('discordView')" onmousemove="cardLight(event,this)">
                  <div class="flex flex-col h-full">
                    <div class="flex items-start justify-between mb-6">
                      <div class="backdrop-blur-sm bg-white/10 p-3 rounded-3xl">
                        <svg class="text-white h-7 w-7" fill="currentColor" viewBox="0 0 24 24"><path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37 67.703 67.703 0 0 0-1.718 6.645 68.657 68.657 0 0 0 2.588 4.486.076.076 0 0 0 .084.028 19.8 19.8 0 0 0 5.994-2.99.077.077 0 0 0 .083-.028 68.587 68.587 0 0 0 2.594-4.486 67.7 67.7 0 0 0-1.718-6.645zm-10.815 13.588a2.295 2.295 0 1 1 0-4.59 2.295 2.295 0 0 1 0 4.59zm6.815 0a2.295 2.295 0 1 1 0-4.59 2.295 2.295 0 0 1 0 4.59z"/></svg>
                      </div>
                    </div>
                    <h3 class="text-2xl font-bold mb-3">Communauté Discord</h3>
                    <p class="text-white/70 leading-relaxed">Rejoins, suis les annonces et ouvre un ticket au besoin.</p>
                    <div class="mt-auto pt-6 flex items-center justify-between border-t border-white/10">
                      <span class="text-white text-sm font-medium">Objectif 1000 membres</span>
                      <span class="text-white/70 text-sm">Rejoindre →</span>
                    </div>
                  </div>
                </article>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- DOC -->
      <section id="docView" class="spa-view">
        <div class="max-w-screen-xl mx-auto px-6 py-16">
          <h2 class="text-4xl font-extrabold mb-6">Documentation</h2>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="card-hover backdrop-blur-[10px] bg-white/5 border border-white/10 p-8 rounded-[2rem]">
              <h3 class="text-2xl font-bold mb-4 text-white">Débuter sur RYNACITY RP</h3>
              <p class="text-white/70 mb-4">Bienvenue sur le serveur. Voici les bases pour débuter ton aventure.</p>
              <ul class="list-disc list-inside text-white/80 space-y-2">
                <li>Télécharger Roblox</li>
                <li>Rechercher "Rynacity RP"</li>
                <li>Créer ton personnage</li>
              </ul>
            </div>
            <div class="card-hover backdrop-blur-[10px] bg-white/5 border border-white/10 p-8 rounded-[2rem]">
              <h3 class="text-2xl font-bold mb-4 text-white">Règles RP</h3>
              <p class="text-white/70 mb-4">Le respect est la clé d'un bon RP.</p>
              <ul class="list-disc list-inside text-white/80 space-y-2">
                <li>Pas de PowerGaming</li>
                <li>Pas de MetaGaming</li>
                <li>Respecter le staff</li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- MAP -->
      <section id="mapView" class="spa-view">
        <div class="max-w-screen-xl mx-auto px-6 py-16">
          <h2 class="text-4xl font-extrabold mb-6">Carte du Serveur</h2>
          <div class="card-hover backdrop-blur-[10px] bg-white/5 border border-white/10 rounded-[2rem] overflow-hidden h-[500px] flex items-center justify-center">
            <div class="text-center">
              <svg class="w-20 h-20 text-white/20 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"/></svg>
              <p class="text-white/50">Carte Interactive (Bientôt disponible)</p>
            </div>
          </div>
        </div>
      </section>

      <!-- UPDATES -->
      <section id="updatesView" class="spa-view">
        <div class="max-w-screen-xl mx-auto px-6 py-16">
          <h2 class="text-4xl font-extrabold mb-6">Mises à jour</h2>
          <div class="card-hover backdrop-blur-[10px] bg-white/5 border border-white/10 rounded-[2rem] p-8 mb-6">
            <div class="flex justify-between items-start mb-4">
              <h3 class="text-2xl font-bold text-white">v1.0.0 — Aujourd’hui</h3>
              <span class="bg-white/10 text-white px-3 py-1 rounded-full text-xs font-bold border border-white/10">STABLE</span>
            </div>
            <ul class="list-disc list-inside text-white/70 space-y-2">
              <li>Nouveaux métiers + équilibrage économie</li>
              <li>Optimisations de performance</li>
              <li>Corrections de bugs de spawn</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- DISCORD -->
      <section id="discordView" class="spa-view">
        <div class="max-w-screen-xl mx-auto px-6 py-16">
          <h2 class="text-4xl font-extrabold mb-4">Notre Discord</h2>
          <p class="text-white/70 mb-8">Rejoins la communauté pour les annonces, évènements et support.</p>

          <div class="card-hover backdrop-blur-[10px] bg-white/5 border border-white/10 rounded-[2rem] p-8 mb-8">
            <div class="flex items-center justify-between mb-3">
              <span class="text-white/80 font-semibold">Objectif: <span class="text-white">1000</span> membres</span>
              <span class="text-white/60">80 / 1000</span>
            </div>
            <div class="w-full h-3 bg-white/10 rounded-full overflow-hidden">
              <div class="h-3 rounded-full bg-white" style="width: 8%; box-shadow: 0 0 16px rgba(255,255,255,0.2);"></div>
            </div>
            <p class="text-white/50 text-sm mt-3">Aidez-nous à atteindre l’objectif ! Invitez vos amis.</p>
          </div>

          <div class="card-hover backdrop-blur-[10px] bg-white/5 border border-white/10 rounded-[2rem] p-8 text-center">
            <h3 class="text-2xl font-bold mb-2 text-white">Rejoindre le serveur</h3>
            <p class="text-white/70 mb-6">Clique ci-dessous pour rejoindre immédiatement.</p>
            <a href="#" class="btn-gradient inline-flex">Rejoindre le Discord</a>
          </div>
        </div>
      </section>

      <!-- SHOP (ICONES ET COULEURS) -->
      <section id="shopView" class="spa-view">
        <div class="max-w-screen-xl mx-auto px-6 py-16">
          <h2 class="text-4xl font-extrabold mb-8 text-center">BOUTIQUE</h2>
          <p class="text-center text-white/50 mb-12">Choisis ton Gamepass pour débloquer des véhicules exclusifs.</p>

          <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <!-- PASS SPORT (JAUNE - VOITURE) -->
            <article class="card-hover backdrop-blur-[10px] border p-8 rounded-[2rem] text-center shop-sport transition-all duration-300">
              <div class="w-20 h-20 bg-yellow-500/10 rounded-full flex items-center justify-center mx-auto mb-6 border border-yellow-500/20">
                <!-- Icone Voiture -->
                <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.7-1.7H5c-.9 0-1.7.8-1.7 1.7v3c0 .6-.4 1-1 1h2m4.6-2.6l2.29-2.29a1 1 0 011.41 1.41l-2.29 2.29a1 1 0 001.41-1.41L14.59 14.41a1 1 0 001.41 1.41l2.29-2.29a1 1 0 011.41-1.41l-2.29-2.29a1 1 0 001.41 1.41l2.29 2.29a1 1 0 011.41 1.41l-2.29 2.29a1 1 0 01-1.41 1.41L19 17z"/></svg>
              </div>
              <h3 class="text-2xl font-bold mb-2">Gamepass Sport</h3>
              <div class="inline-block bg-yellow-500/10 px-3 py-1 rounded-full text-xs font-bold text-yellow-400 mb-4 border border-yellow-500/30">POPULAIRE</div>
              <p class="text-white/70 mb-4">Contenu exclusif pour les amateurs de vitesse.</p>
              <ul class="text-white/60 text-sm space-y-1 mb-6">
                <li>• 2 Véhicules Sportives</li>
                <li>• Accessoires spéciaux</li>
              </ul>
              <button class="btn-gradient w-full justify-center bg-yellow-400 text-yellow-900">Acheter</button>
            </article>

            <!-- PASS 4X4 (VERT - CAMION) -->
            <article class="card-hover backdrop-blur-[10px] border p-8 rounded-[2rem] text-center shop-4x4 transition-all duration-300 relative overflow-hidden">
              <div class="absolute top-0 left-0 w-full h-1 bg-green-500/20"></div>
              <div class="w-20 h-20 bg-green-500/10 rounded-full flex items-center justify-center mx-auto mb-6 border border-green-500/20">
                <!-- Icone Camion/Boite -->
                <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v16h16m-2 0V6H6m0 0l-4-4m-4-4V6H4m14 0l-4-4m0 0v14M4 20h16m-2 0V6H6m0 0l-4-4m-4-4V6H4z"/></svg>
              </div>
              <h3 class="text-2xl font-bold mb-2">Gamepass 4x4</h3>
              <p class="text-white/70 mb-4">Domine tout type de terrain.</p>
              <ul class="text-white/60 text-sm space-y-1 mb-6">
                <li>• Véhicules Tout-Terrain</li>
                <li>• Capacité de chargement</li>
              </ul>
              <button class="btn-gradient w-full justify-center bg-green-500 text-green-900">Acheter</button>
            </article>

            <!-- PASS VIP (VIOLET - ÉTOILE) -->
            <article class="card-hover backdrop-blur-[10px] border p-8 rounded-[2rem] text-center shop-vip transition-all duration-300 shadow-[0_0_30px_rgba(168,85,247,0.2)]">
              <div class="w-20 h-20 bg-white rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg shadow-purple-500/40">
                <!-- Icone Étoile -->
                <svg class="w-10 h-10 text-purple-900" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.595 1.81l-2.293 2.746a1 1 0 00-.932 1.525l-2.019-4.38a1 1 0 00-.718.097l-2.019 4.38a1 1 0 00.932 1.525l2.293 2.746c.39.533.951.81 1.595.81h3.462c.643 0 1.205.277 1.603.718l1.07-3.292z"/></svg>
              </div>
              <h3 class="text-2xl font-black mb-2">Gamepass VIP</h3>
              <div class="inline-block bg-black px-3 py-1 rounded-full text-xs font-bold text-white mb-4 border border-white">LE PLUS CONNU</div>
              <p class="text-white/90 mb-4 font-bold">Le statut ultime.</p>
              <ul class="text-white/70 text-sm space-y-1 mb-6">
                <li>• Accès à tout</li>
                <li>• Véhicules exclusifs</li>
                <li>• Priorité totale</li>
              </ul>
              <button class="btn-gradient w-full justify-center bg-purple-500 text-white">Acheter</button>
            </article>
          </div>
        </div>
      </section>

      <!-- JEU DE CARTES -->
      <section id="adminView" class="spa-view">
        <div class="max-w-4xl w-full mx-auto px-4 pt-24 pb-12">
          
          <div class="text-center mb-8 relative">
            <h2 class="text-4xl md:text-6xl font-black text-white uppercase tracking-tighter">
              Lucky Cards
            </h2>
            <p class="text-gray-500 mt-2">Trouve les 3 cartes identiques.</p>
            
            <div class="flex justify-center gap-6 mt-6">
              <div class="bg-black border border-white/10 px-5 py-2 rounded-3xl backdrop-blur-md">
                <span class="block text-xs text-gray-500 uppercase font-bold tracking-widest">Essais</span>
                <span id="attemptsLeftDisplay" class="text-2xl font-black text-white">5</span>
                <br><span id="editPseudoBtn" class="edit-pseudo-btn hidden">Modifier Pseudo</span>
                <span id="countdownDisplay" class="countdown hidden">Prochain: --:--:--</span>
              </div>
              <div class="bg-black border border-white/10 px-5 py-2 rounded-3xl backdrop-blur-md">
                <span class="block text-xs text-gray-500 uppercase font-bold tracking-widest">Joueur</span>
                <span id="gameUsernameDisplay" class="text-xl font-bold text-white">---</span>
              </div>
            </div>
          </div>

          <div id="cardAuthBox" class="max-w-md mx-auto bg-black border border-white/10 rounded-[2rem] p-8 shadow-2xl relative overflow-hidden mb-8">
            <div class="text-center mb-6">
              <h3 class="text-2xl font-bold text-white">Identification</h3>
              <p class="text-sm text-gray-400">Entre ton pseudo.</p>
            </div>
            
            <input id="cardUsernameInput" type="text" class="input text-center mb-4 text-lg border-white/20" placeholder="Pseudo Roblox..." maxlength="15" autocomplete="off">
            <button id="startCardGameBtn" class="btn-gradient w-full justify-center py-4 text-lg">
              JOUER
            </button>
          </div>

          <div id="cardGameArea" class="hidden relative">
            <div id="antiScamOverlay" class="absolute inset-0 z-20 pointer-events-none flex flex-col items-center justify-center opacity-5 mix-blend-overlay select-none">
              <div class="transform -rotate-12 scale-[2] text-9xl font-black text-white border-4 border-white/20 p-8 rounded-xl tracking-tighter" id="overlayPseudo">PSEUDO</div>
            </div>

            <div id="cardsGrid" class="grid grid-cols-3 gap-3 md:gap-6 max-w-[500px] mx-auto perspective-1000">
            </div>

            <div id="gameResultMessage" class="hidden text-center mt-8">
              <p class="text-3xl font-black text-white mb-2" id="resultText">RÉSULTAT</p>
              <p id="gameInstruction" class="text-sm text-gray-400">Preuve requise : capture avec le filigrane.</p>
              <button onclick="resetRound()" class="mt-6 bg-white/10 hover:bg-white/20 text-white px-8 py-3 rounded-full text-sm transition border border-white/10 font-bold">Essai Suivant</button>
            </div>

            <div id="limitReachedModal" class="hidden fixed inset-0 z-50 bg-black/95 backdrop-blur-lg flex items-center justify-center">
              <div class="bg-black border border-white/10 p-8 rounded-[2rem] text-center max-w-sm mx-4 shadow-[0_0_50px_rgba(255,255,255,0.1)]">
                <h3 class="text-3xl font-bold text-white mb-2">PLUS D'ESSAIS</h3>
                <p class="text-gray-400 mb-6">Tu as utilisé tes 5 essais. Reviens demain.</p>
                <button onclick="closeLimitModal()" class="bg-white/10 hover:bg-white/20 text-white px-6 py-3 rounded-3xl font-bold transition">Fermer</button>
              </div>
            </div>
          </div>

        </div>
      </section>

    </main>

    <!-- Bouton Admin (Jeu) -->
    <button id="adminFab" class="admin-fab hidden" onclick="openView('adminView')">
      <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 20 20"><path d="M11.3 1.046A1 1 0 0112 2v1.051a7.962 7.962 0 013.043 1.26l.744-.744a1 1 0 011.414 1.414l-.744.744A7.962 7.962 0 0118 8h1a1 1 0 110 2h-1a7.962 7.962 0 01-1.26 3.043l.744.744a1 1 0 11-1.414 1.414l-.744-.744A7.962 7.962 0 0112 16.949V18a1 1 0 11-2 0v-1.051a7.962 7.962 0 01-3.043-1.26l-.744.744a1 1 0 01-1.414-1.414l.744-.744A7.962 7.962 0 014 10H3a1 1 0 110-2h1a7.962 7.962 0 011.26-3.043l-.744-.744A1 1 0 015.93 2.8l.744.744A7.962 7.962 0 019 3.051V2a1 1 0 012 0z"/></svg>
      <span>Jeu</span>
    </button>
  </div>

  <script>
    // ----- SYSTEME DE NOTIFICATION -----
    function showNotification(message, type = 'info') {
      const container = document.getElementById('notificationContainer');
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      
      let icon = '';
      if(type === 'error') icon = '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 10h.01M15 9h.01"/></svg>';
      else if(type === 'success') icon = '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>';
      else icon = '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01"/></svg>';

      toast.innerHTML = `${icon}<span class="font-semibold text-sm">${message}</span>`;
      
      container.appendChild(toast);
      
      setTimeout(() => {
        toast.style.animation = 'fadeOut 0.4s ease forwards';
        setTimeout(() => toast.remove(), 400);
      }, 4000);
    }

    // ----- GENERATION CAPTCHA -----
    const n1 = Math.floor(Math.random() * 10);
    const n2 = Math.floor(Math.random() * 10);
    const captchaResult = n1 + n2;
    document.getElementById('captchaQuestion').innerText = `Sécurité: ${n1} + ${n2} = ?`;

    // ----- ACCÈS SITE -----
    const SITE_PASSWORD = 'yRy';
    const passwordModal = document.getElementById('passwordModal');
    const mainContent = document.getElementById('mainContent');
    const passwordForm = document.getElementById('passwordForm');
    const passwordInput = document.getElementById('passwordInput');
    const captchaInput = document.getElementById('captchaInput');
    const errorMessage = document.getElementById('errorMessage');
    const pageLoader = document.getElementById('pageLoader');
    const navHomeText = document.getElementById('navHomeText'); // Texte Accueil

    if (sessionStorage.getItem('authenticated') === 'true') {
      passwordModal.classList.add('hidden');
      mainContent.classList.remove('hidden');
      navHomeText.innerText = "Accueil"; // Accueil par défaut
    }
    
    passwordForm?.addEventListener('submit', (e) => {
      e.preventDefault();
      
      // Vérification Captcha
      if (parseInt(captchaInput.value) !== captchaResult) {
        showNotification('Erreur de calcul anti-bot !', 'error');
        captchaInput.value = '';
        captchaInput.classList.add('shake');
        setTimeout(() => captchaInput.classList.remove('shake'), 500);
        return;
      }

      if (passwordInput.value === SITE_PASSWORD) {
        // Animation chargement
        pageLoader.classList.remove('hidden');
        setTimeout(() => {
          pageLoader.classList.add('hidden');
          sessionStorage.setItem('authenticated','true');
          passwordModal.classList.add('hidden');
          mainContent.classList.remove('hidden');
          navHomeText.innerText = "Accueil"; // On force Accueil
          showNotification('Bienvenue sur RYNACITY RP', 'success');
        }, 1500); 

      } else {
        showNotification('Mot de passe incorrect !', 'error');
        passwordInput.value = '';
        passwordInput.classList.add('shake');
        setTimeout(() => passwordInput.classList.remove('shake'), 500);
      }
    });

    // ----- SPA NAV -----
    const views = ['homeView','docView','mapView','updatesView','discordView','shopView','adminView'];
    const navButtons = document.querySelectorAll('.nav-btn');

    function openView(viewId) {
      pageLoader.classList.remove('hidden');
      setTimeout(() => {
        pageLoader.classList.add('hidden');
        views.forEach(id => {
          const el = document.getElementById(id);
          if (el) el.classList.toggle('active', id === viewId);
        });
        navButtons.forEach(btn => {
          btn.classList.toggle('active', btn.getAttribute('data-view') === viewId);
          btn.setAttribute('aria-current', btn.getAttribute('data-view') === viewId ? 'page' : 'false');
        });
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }, 400); 
    }

    navButtons.forEach(btn => {
      btn.addEventListener('click', (e) => {
        e.preventDefault();
        const viewId = btn.getAttribute('data-view');
        if (viewId) openView(viewId);
      });
    });

    function cardLight(e, el) {
      const rect = el.getBoundingClientRect();
      const x = ((e.clientX - rect.left) / rect.width) * 100;
      const y = ((e.clientY - rect.top) / rect.height) * 100;
      el.style.setProperty('--x', x + '%');
      el.style.setProperty('--y', y + '%');
    }
    window.cardLight = cardLight;
    window.openView = openView;

    // ----- JEU DE CARTES -----
    const cardAuthBox = document.getElementById('cardAuthBox');
    const cardGameArea = document.getElementById('cardGameArea');
    const startCardBtn = document.getElementById('startCardGameBtn');
    const cardUsernameInput = document.getElementById('cardUsernameInput');
    const attemptsDisplay = document.getElementById('attemptsLeftDisplay');
    const countdownDisplay = document.getElementById('countdownDisplay');
    const overlayPseudo = document.getElementById('overlayPseudo');
    const grid = document.getElementById('cardsGrid');
    const resultMsg = document.getElementById('gameResultMessage');
    const resultText = document.getElementById('resultText');
    const resultInstruction = document.getElementById('gameInstruction');
    const limitModal = document.getElementById('limitReachedModal');
    const editPseudoBtn = document.getElementById('editPseudoBtn');

    const STORAGE_KEY = 'rynacity_cards_final';
    let gameState = { date: '', attempts: 5, username: '' };
    let selectedCards = [];
    let isProcessing = false;
    let currentCardsData = []; 
    let countdownInterval;
    
    function updateCountdown() {
      const now = new Date();
      const tomorrow = new Date(now);
      tomorrow.setHours(24,0,0,0);
      const diff = tomorrow - now;
      if (diff <= 0) {
        countdownDisplay.innerText = "Reset imminent...";
      } else {
        const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((diff % (1000 * 60)) / 1000);
        countdownDisplay.innerText = `Prochain: ${String(hours).padStart(2,'0')}:${String(minutes).padStart(2,'0')}:${String(seconds).padStart(2,'0')}`;
      }
    }
    
    setInterval(updateCountdown, 1000);
    
    function initCardGame() {
      const today = new Date().toLocaleDateString();
      const saved = localStorage.getItem(STORAGE_KEY);
      
      if (saved) {
        gameState = JSON.parse(saved);
        if (gameState.date !== today) {
          gameState.date = today;
          gameState.attempts = 5;
        }
      } else {
        gameState.date = today;
        gameState.attempts = 5;
      }
      saveCardState();
      updateUI();
    }

    function saveCardState() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(gameState));
    }

    function updateUI() {
      attemptsDisplay.innerText = gameState.attempts;
      
      if(gameState.attempts <= 0) {
        attemptsDisplay.classList.add('text-red-500');
        countdownDisplay.classList.remove('hidden');
      } else {
        attemptsDisplay.classList.remove('text-red-500');
        countdownDisplay.classList.add('hidden');
      }

      if(gameState.username) {
        document.getElementById('gameUsernameDisplay').innerText = gameState.username;
        overlayPseudo.innerText = gameState.username.toUpperCase();
      }
    }

    startCardBtn.addEventListener('click', () => {
      const pseudo = cardUsernameInput.value.trim();
      if(!pseudo) return showNotification("Entre un pseudo !", "error");
      if(gameState.attempts <= 0) {
        limitModal.classList.remove('hidden');
        showNotification("Tu n'as plus d'essais !", "error");
        return;
      }

      gameState.username = pseudo;
      saveCardState();
      
      cardAuthBox.classList.add('hidden');
      cardGameArea.classList.remove('hidden');
      showNotification(`Bienvenue ${pseudo} !`, 'success');
      updateUI();
      startNewRound();
    });
    
    editPseudoBtn.addEventListener('click', () => {
      gameState.username = ''; 
      saveCardState();
      cardAuthBox.classList.remove('hidden');
      cardGameArea.classList.add('hidden');
      cardUsernameInput.value = '';
      editPseudoBtn.classList.add('hidden');
      updateUI();
    });

    function closeLimitModal() {
      limitModal.classList.add('hidden');
    }

    function startNewRound() {
      if(gameState.attempts <= 0) {
        limitModal.classList.remove('hidden');
        return;
      }

      grid.innerHTML = '';
      selectedCards = [];
      resultMsg.classList.add('hidden');
      isProcessing = false;

      const deck = [1,1,1, 2,2,2, 'X','X','X'];
      currentCardsData = shuffle(deck);

      currentCardsData.forEach((val, index) => {
        const card = document.createElement('div');
        card.className = 'group relative h-40 w-full cursor-pointer perspective-1000';
        card.dataset.value = val;
        card.dataset.index = index;
        
        card.innerHTML = `
          <div class="card-inner" id="card-inner-${index}">
            <div class="card-face z-20">
              <div class="text-6xl font-black text-white/20 select-none">?</div>
            </div>
            <div class="card-face rotate-y-180 z-10">
              ${getCardContent(val)}
            </div>
          </div>
        `;

        card.addEventListener('click', () => flipCard(card, index));
        grid.appendChild(card);
      });
    }

    function getCardContent(val) {
      if(val === 1) {
        return `<div class="text-center"><div class="text-6xl font-black text-yellow-400">1</div><div class="text-xs text-yellow-200 font-bold mt-1">1M€</div></div>`;
      } else if(val === 2) {
        return `<div class="text-center"><div class="text-6xl font-black text-white">2</div><div class="text-xs text-gray-300 font-bold mt-1">BMW</div></div>`;
      } else {
        return `<div class="text-center"><div class="text-6xl font-black text-red-500">X</div><div class="text-xs text-red-300 font-bold mt-1">PERDU</div></div>`;
      }
    }

    function flipCard(card, index) {
      if(isProcessing || selectedCards.includes(index) || card.classList.contains('flipped')) return;

      const inner = document.getElementById(`card-inner-${index}`);
      inner.style.transform = 'rotateY(180deg)';
      card.classList.add('flipped');
      selectedCards.push(index);

      if(selectedCards.length === 3) {
        checkMatch();
      }
    }

    function checkMatch() {
      isProcessing = true;
      const val1 = currentCardsData[selectedCards[0]];
      const val2 = currentCardsData[selectedCards[1]];
      const val3 = currentCardsData[selectedCards[2]];

      gameState.attempts--;
      saveCardState();
      updateUI();

      setTimeout(() => {
        if(val1 === val2 && val2 === val3) {
          handleWin(val1);
        } else {
          handleLoss();
        }
      }, 1000);
    }

    function handleWin(value) {
      let msg = "";
      let colorClass = "";
      
      if(value === 1) {
        msg = "1.000.000€ GAGNÉ !";
        colorClass = "text-yellow-400";
        showNotification("Mega Win ! Tu as gagné 1.000.000€", 'success');
      } else if (value === 2) {
        msg = "BMW + 100K€ GAGNÉ !";
        colorClass = "text-white";
        showNotification("Gagné ! Tu as eu une BMW + 100k", 'success');
      } else {
        msg = "C'est 3 X...";
        colorClass = "text-red-400";
      }

      resultText.innerHTML = msg;
      resultText.className = `text-3xl font-black drop-shadow-md ${colorClass}`;
      resultMsg.classList.remove('hidden');
      
      if(value === 1 || value === 2) {
        resultInstruction.style.display = 'block';
      } else {
        resultInstruction.style.display = 'none';
      }

      selectedCards.forEach(idx => {
        document.querySelector(`#card-inner-${idx} > .rotate-y-180`).style.boxShadow = "inset 0 0 20px rgba(255,255,255,0.2)";
      });
    }

    function handleLoss() {
      resultText.innerHTML = "RATÉ !";
      resultText.className = "text-3xl font-black text-white drop-shadow-md";
      resultMsg.classList.remove('hidden');
      resultInstruction.style.display = 'none';
    }

    function resetRound() {
      startNewRound();
    }

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    window.resetRound = resetRound;
    initCardGame();
  </script>
</body>
</html>
